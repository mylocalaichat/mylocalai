import { createMcpHandler } from '@vercel/mcp-adapter'
import { z } from 'zod'

const handler = createMcpHandler(
  server => {
    server.tool(
      "courseReminder",
      "Give a course reminder based on experience level",
      {
        "experienceLevel": z.enum(["beginner", "intermediate", "advanced"]),
      },
      (experience) => ({
        content: [
          {
            type: "text",
            text: `Here is a course reminder for ${experience.experienceLevel} level students.`
          }
        ]
      })
    )
  }, 
  {
    capabilities: {
      tools: {
        courseRecommender: {
          description: "Gives course recommendations based on experience level",
        }
      }
    }
  }, 
  {
    sseEndpoint: "/sse",
    streamableHttpEndpoint: "/mcp",
    verboseLogs: true,
    maxDuration: 60
  }
)

export { handler as GET, handler as POST, handler as DELETE }